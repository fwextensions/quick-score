<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/overrides.css">
</head>

<body>

<div id="main">
    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>QuickScore</h1>
<blockquote>
<p><code>quick-score</code> is a JavaScript string-scoring and fuzzy-matching library based on the Quicksilver algorithm, designed for smart auto-complete.</p>
</blockquote>
<p><a href="https://codecov.io/gh/fwextensions/quick-score"><img src="https://img.shields.io/codecov/c/github/fwextensions/quick-score.svg?style=flat-square" alt="Code Coverage"></a>
<a href="https://github.com/fwextensions/quick-score/actions/workflows/gh-pages.yml"><img src="https://github.com/fwextensions/quick-score/actions/workflows/gh-pages.yml/badge.svg?style=flat-square" alt="Build Status"></a>
<a href="https://www.npmjs.com/package/quick-score"><img src="https://img.shields.io/bundlephobia/minzip/quick-score.svg?style=flat-square" alt="Minzip Size"></a>
<a href="https://github.com/fwextensions/quick-score/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/quick-score.svg?style=flat-square" alt="MIT License"></a></p>
<p>QuickScore improves on the original Quicksilver algorithm by tuning the scoring for long strings, such as webpage titles or URLs, so that the order of the search results makes more sense.  It's used by the <a href="https://chrome.google.com/webstore/detail/quickey-%E2%80%93-the-quick-tab-s/ldlghkoiihaelfnggonhjnfiabmaficg">QuicKey extension for Chrome</a> to enable users to easily find an open tab via search.</p>
<p>QuickScore is fast, dependency-free, and is just 2KB when minified and gzipped.</p>
<h2>Demo</h2>
<p><a href="https://fwextensions.github.io/quick-score-demo/">See QuickScore in action</a>, and compare its results to other scoring and matching libraries.</p>
<h2>Install</h2>
<pre class="prettyprint source lang-sh"><code>npm install --save quick-score
</code></pre>
<p>If you prefer to use the built library files directly instead of using <code>npm</code>, you can download them from <a href="https://unpkg.com/browse/quick-score/dist/">https://unpkg.com/browse/quick-score/dist/</a>.</p>
<p>Or you can load a particular release of the minified script directly from <code>unpkg.com</code>, and then access the library via the <code>quickScore</code> global:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://unpkg.com/quick-score@0.0.14/dist/quick-score.min.js&quot;>&lt;/script>
&lt;script type=&quot;text/javascript&quot;>
    console.log(quickScore.quickScore(&quot;thought&quot;, &quot;gh&quot;));
&lt;/script>
</code></pre>
<h2>Usage</h2>
<h3>Calling <code>quickScore()</code> directly</h3>
<p>You can import the <a href="https://fwextensions.github.io/quick-score/global.html#quickScore"><code>quickScore()</code></a> function from the ES6 module:</p>
<pre class="prettyprint source lang-js"><code>import {quickScore} from &quot;quick-score&quot;;
</code></pre>
<p>Or from a property of the CommonJS module:</p>
<pre class="prettyprint source lang-js"><code>const quickScore = require(&quot;quick-score&quot;).quickScore;
</code></pre>
<p>Then call <code>quickScore()</code> with a <code>string</code> and a <code>query</code> to score against that string.  It will return a floating point score between <code>0</code> and <code>1</code>.  A higher score means that string is a better match for the query.  A <code>1</code> means the query is the highest match for the string, though the two strings may still differ in case and whitespace characters.</p>
<pre class="prettyprint source lang-js"><code>quickScore(&quot;thought&quot;, &quot;gh&quot;);   // 0.4142857142857143
quickScore(&quot;GitHub&quot;, &quot;gh&quot;);    // 0.9166666666666666
</code></pre>
<p>Matching <code>gh</code> against <code>GitHub</code> returns a higher score than <code>thought</code>, because it matches the capital letters in <code>GitHub</code>, which are weighted more highly.</p>
<h3>Sorting lists of strings with a <code>QuickScore</code> instance</h3>
<p>A typical use-case for string scoring is auto-completion, where you want the user to get to the desired result by typing as few characters as possible.  Instead of calling <code>quickScore()</code> directly for every item in a list and then sorting it based on the score, it's simpler to use an instance of the <a href="https://fwextensions.github.io/quick-score/QuickScore.html"><code>QuickScore</code></a> class:</p>
<pre class="prettyprint source lang-js"><code>import {QuickScore} from &quot;quick-score&quot;;

const qs = new QuickScore([&quot;thought&quot;, &quot;giraffe&quot;, &quot;GitHub&quot;, &quot;hello, Garth&quot;]);
const results = qs.search(&quot;gh&quot;);

// results =>
[
    {
        &quot;item&quot;: &quot;GitHub&quot;,
        &quot;score&quot;: 0.9166666666666666,
        &quot;matches&quot;: [[0, 1], [3, 4]]
    },
    {
        &quot;item&quot;: &quot;hello, Garth&quot;,
        &quot;score&quot;: 0.6263888888888888,
        &quot;matches&quot;: [[7, 8], [11, 12]]
    },
    // ...
]
</code></pre>
<p>The <code>results</code> array in this example is a list of <a href="https://fwextensions.github.io/quick-score/global.html#ScoredString">ScoredString</a> objects that represent the results of matching the query against each string that was passed to the constructor.  It's sorted high to low on each item's score.  Strings with identical scores are sorted alphabetically and case-insensitively.  In the simple case of scoring bare strings, each <code>ScoredString</code> item has three properties:</p>
<ul>
<li><code>item</code>: the string that was scored</li>
<li><code>score</code>: the floating point score of the string for the current query</li>
<li><code>matches</code>: an array of arrays that specify the character ranges where the query matched the string</li>
</ul>
<p>This array could then be used to render a list of matching results as the user types a query.</p>
<h3>Sorting lists of objects</h3>
<p>Typically, you'll be sorting items more complex than a bare string.  To tell QuickScore which of an object's keys to score a query against, pass an array of key names or dot-delimited paths as the second parameter to the <code>QuickScore()</code> constructor:</p>
<pre class="prettyprint source lang-js"><code>const bookmarks = [
    {
        &quot;title&quot;: &quot;lodash documentation&quot;,
        &quot;url&quot;: &quot;https://lodash.com/docs&quot;
    },
    {
        &quot;title&quot;: &quot;Supplying Images - Google Chrome&quot;,
        &quot;url&quot;: &quot;developer.chrome.com/webstore/images&quot;
    },
    // ...
];
const qs = new QuickScore(bookmarks, [&quot;title&quot;, &quot;url&quot;]);
const results = qs.search(&quot;devel&quot;);

// results =>
[
    {
        &quot;item&quot;: {
            &quot;title&quot;: &quot;Supplying Images - Google Chrome&quot;,
            &quot;url&quot;: &quot;developer.chrome.com/webstore/images&quot;
        },
        &quot;score&quot;: 0.9138888888888891,
        &quot;scoreKey&quot;: &quot;url&quot;,
        &quot;scores&quot;: {
            &quot;title&quot;: 0,
            &quot;url&quot;: 0.9138888888888891
        },
        &quot;matches&quot;: {
            &quot;title&quot;: [],
            &quot;url&quot;: [[0, 5]]
        }
    },
    // ...
]
</code></pre>
<p>When matching against objects, each item in the results array is a <a href="https://fwextensions.github.io/quick-score/global.html#ScoredObject">ScoredObject</a>, with a few additional properties :</p>
<ul>
<li><code>item</code>: the object that was scored</li>
<li><code>score</code>: the highest score from among the individual key scores</li>
<li><code>scoreKey</code>: the name of the key with the highest score, which will be an empty string if they're all zero</li>
<li><code>scoreValue</code>: the value of the key with the highest score, which makes it easier to access if it's a nested string</li>
<li><code>scores</code>: a hash of the individual scores for each key</li>
<li><code>matches</code>: a hash of arrays that specify the character ranges of the query match for each key</li>
</ul>
<p>When two items have the same score, they're sorted alphabetically and case-insensitively on the key specified by the <code>sortKey</code> option, which defaults to the first item in the keys array.  In the example above, that would be <code>title</code>.</p>
<p>Each <code>ScoredObject</code> item also has a <code>_</code> property, which caches transformed versions of the item's strings, and might contain additional internal metadata in the future.  It can be ignored.</p>
<h3>TypeScript support</h3>
<p>Although the QuickScore codebase is currently written in JavaScript, the package comes with full TypeScript typings.  The QuickScore class takes a generic type parameter based on the type of objects in the <code>items</code> array passed to the constructor.  That way, you can access <code>.item</code> on the <code>ScoredObject</code> result and get back an object of the same type that you passed in.</p>
<h3>Ignoring diacritics and accents when scoring</h3>
<p>If the strings you're matching against contain diacritics on some of the letters, like <code>à</code> or <code>ç</code>, you may want to count a match even when the query string contains the unaccented forms of those letters.  The QuickScore library doesn't contain support for this by default, since it's only needed with certain strings and the code to remove accents would triple its size.  But it's easy to combine  QuickScore with other libraries to ignore diacritics.</p>
<p>One example is the <a href="https://github.com/dundalek/latinize">latinize</a> <a href="https://www.npmjs.com/package/latinize">npm package</a>, which will strip accents from a string and can be used in a <code>transformString()</code> function that's passed as an option to the <a href="https://fwextensions.github.io/quick-score/QuickScore.html#QuickScore">QuickScore constructor</a>.  This function takes a <code>string</code> parameter and returns a transformed version of that string:</p>
<pre class="prettyprint source lang-js"><code>// including latinize.js on the page creates a global latinize() function
import {QuickScore} from &quot;quick-score&quot;;

const items = [&quot;Café&quot;, &quot;Cafeteria&quot;];
const qs = new QuickScore(items, { transformString: s => latinize(s).toLowerCase() });
const results = qs.search(&quot;cafe&quot;);

// results =>
[
    {
        &quot;item&quot;: &quot;Café&quot;,
        &quot;score&quot;: 1,
        &quot;matches&quot;: [[0, 4]],
        &quot;_&quot;: &quot;cafe&quot;
    },
    // ...
]
</code></pre>
<p><code>transformString()</code> will be called on each of the searchable keys in the <code>items</code> array as well as on the <code>query</code> parameter to the <code>search()</code> method.  The default function calls <code>toLocaleLowerCase()</code> on each string, for a case-insensitive search.  In the example above, the basic <code>toLowerCase()</code> call is sufficient, since <code>latinize()</code> will have already stripped any accents.</p>
<h3>Highlighting matched letters</h3>
<p>Many search interfaces highlight the letters in each item that match what the user has typed.  The <code>matches</code> property of each item in the results array contains information that can be used to highlight those matching letters.</p>
<p>The functional component below is an example of how an item could be highlighted using React.  It surrounds each sequence of matching letters in a <code>&lt;mark&gt;</code> tag and then returns the full string in a <code>&lt;span&gt;</code>.  You could then style the <code>&lt;mark&gt;</code> tag to be bold or a different color to highlight the matches.  (Something similar could be done by concatenating plain strings of HTML tags, though you'll need to be careful to escape the substrings.)</p>
<pre class="prettyprint source lang-jsx"><code>function MatchedString({ string, matches }) {
    const substrings = [];
    let previousEnd = 0;

    for (let [start, end] of matches) {
        const prefix = string.substring(previousEnd, start);
        const match = &lt;mark>{string.substring(start, end)}&lt;/mark>;

        substrings.push(prefix, match);
        previousEnd = end;
    }

    substrings.push(string.substring(previousEnd));

    return &lt;span>{React.Children.toArray(substrings)}&lt;/span>;
}
</code></pre>
<p>The <a href="https://fwextensions.github.io/quick-score-demo/">QuickScore demo</a> uses this approach to highlight the query matches, via the <a href="https://github.com/fwextensions/quick-score-demo/blob/master/src/js/MatchedString.js">MatchedString</a> component.</p>
<h2>API</h2>
<p>See the <a href="https://fwextensions.github.io/quick-score/">API docs</a> for a full description of the <a href="https://fwextensions.github.io/quick-score/QuickScore.html">QuickScore class</a> and the <a href="https://fwextensions.github.io/quick-score/global.html#quickScore">quickScore function</a>.</p>
<h2>License</h2>
<p><a href="./LICENSE">MIT</a> © <a href="https://github.com/fwextensions">John Dunning</a></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="QuickScore.html">QuickScore</a></li><li><a href="Range.html">Range</a></li></ul><h3>Global</h3><ul><li><a href="global.html#quickScore">quickScore</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Fri Jun 03 2022 19:30:17 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>